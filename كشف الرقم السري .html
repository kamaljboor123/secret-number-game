<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙƒØ´Ù Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 450px; /* Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
            max-height: 90vh;
            overflow-y: auto;
        }
        h1 {
            color: #333;
            margin-bottom: 25px;
            font-size: 28px;
        }
        .secret-and-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        .secret-display {
            display: flex;
            justify-content: center;
            gap: 12px;
            flex: 1;
        }
        .secret-box {
            width: 50px;
            height: 50px;
            background: #e9ecef;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .secret-box.revealed {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }
        .toggle-btn, .reset-btn {
            background: #ffa500;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
            font-weight: bold;
        }
        .toggle-btn:hover, .reset-btn:hover {
            background: #ff8c00;
        }
        .input-section {
            margin-bottom: 25px;
        }
        .input-row {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 15px;
        }
        input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            background: #f8f9fa;
            transition: all 0.3s ease;
            direction: rtl;
            readonly;
            cursor: pointer;
        }
        input.active {
            border-color: #ff69b4;
            background: #ffe6f0;
            box-shadow: 0 0 5px rgba(255, 105, 180, 0.3);
        }
        .buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        button {
            background: #ff69b4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s ease;
            font-weight: bold;
        }
        button:hover:not(:disabled) {
            background: #ff1493;
        }
        button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        .reset-btn {
            background: #6c757d;
        }
        .reset-btn:hover:not(:disabled) {
            background: #5a6268;
        }
        .result {
            font-size: 24px;
            font-weight: bold;
            min-height: 30px;
            padding: 10px;
            border-radius: 8px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            text-align: center;
        }
        .plus { color: #28a745; }
        .minus { color: #fd7e14; }
        .success { color: #28a745; background: #d4edda; border-color: #c3e6cb; }
        .timer {
            margin-bottom: 20px;
            font-size: 20px;
            color: #495057;
            font-weight: bold;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .time-up { color: #dc3545; background: #f8d7da; border-color: #f5c6cb; }
        /* Ø¯Ù…Ø¬ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
        .attempts-history {
            margin-top: 25px;
            text-align: right;
            font-size: 14px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }
        .attempts-history h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
        }
        .attempt {
            margin-bottom: 8px;
            padding: 8px;
            background: #ffffff;
            border-radius: 6px;
            border-left: 3px solid #ff69b4;
            text-align: right;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .guess-text {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
        }
        .result-small {
            font-size: 14px;
            font-weight: bold;
            display: flex;
            gap: 3px;
        }
        /* Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù…Ø±Ø¦ÙŠØ© ÙˆÙØ¹Ø§Ù„Ø©ØŒ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø³Ø­Ø¨) */
        .number-pad {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            max-width: 200px;
            margin: 0;
            position: absolute;
            top: 70%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            cursor: move;
            touch-action: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            opacity: 1;
            visibility: visible;
        }
        .number-pad button {
            width: 50px;
            height: 50px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #333;
        }
        .number-pad button:hover {
            background: #e9ecef;
            border-color: #ff69b4;
        }
        .number-pad .delete-btn {
            background: #dc3545;
            color: white;
        }
        .number-pad .delete-btn:hover {
            background: #c82333;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© (Ø£ÙƒØ¨Ø± Ù…Ù† 768px): Ø¹Ø±Ø¶ ÙƒØ§Ù…Ù„ ÙˆØªÙƒØ¨ÙŠØ± */
        @media (min-width: 769px) {
            .container {
                max-width: 800px; /* ØªÙˆØ³ÙŠØ¹ Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø© */
                width: 90%; /* ÙŠØ£Ø®Ø° Ù…Ø¹Ø¸Ù… Ø§Ù„Ù…Ø³Ø§Ø­Ø© */
                padding: 40px; /* ØªØ¨Ø§Ø¹Ø¯ Ø£ÙƒØ¨Ø± */
            }
            h1 {
                font-size: 36px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
                margin-bottom: 30px;
            }
            .secret-box, input {
                width: 70px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø­Ù‚ÙˆÙ„ */
                height: 70px;
                font-size: 28px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù†Øµ Ø¯Ø§Ø®Ù„Ù‡Ø§ */
            }
            .secret-display, .input-row {
                gap: 20px; /* ØªØ¨Ø§Ø¹Ø¯ Ø£ÙƒØ¨Ø± Ø¨ÙŠÙ† Ø§Ù„Ø­Ù‚ÙˆÙ„ */
            }
            button {
                padding: 15px 30px;
                font-size: 20px; /* ØªÙƒØ¨ÙŠØ± Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ø¥Ø¹Ø§Ø¯Ø© */
            }
            .toggle-btn, .reset-btn {
                padding: 12px 18px;
                font-size: 16px;
            }
            .result {
                font-size: 32px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù†ØªÙŠØ¬Ø© */
                padding: 15px;
            }
            .timer {
                font-size: 26px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù…Ø¤Ù‚Øª */
                padding: 15px;
            }
            .attempts-history {
                font-size: 18px; /* ØªÙƒØ¨ÙŠØ± Ø¹Ø§Ù… Ù„Ù„ØªØ§Ø±ÙŠØ® */
                padding: 15px;
            }
            .attempts-history h3 {
                font-size: 22px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
                margin-bottom: 15px;
            }
            .attempt {
                margin-bottom: 12px;
                padding: 12px; /* ØªØ¨Ø§Ø¹Ø¯ Ø£ÙƒØ¨Ø± */
                font-size: 18px;
                border-left-width: 4px; /* Ø®Ø· Ø£Ø¹Ø±Ø¶ */
            }
            .guess-text {
                font-size: 28px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ® */
                padding: 8px 12px; /* ØªØ¨Ø§Ø¹Ø¯ Ø£ÙƒØ¨Ø± */
            }
            .result-small {
                font-size: 24px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª (+ Ùˆ -) */
                gap: 8px; /* ØªØ¨Ø§Ø¹Ø¯ Ø£ÙØ¶Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª */
            }
            .number-pad {
                max-width: 250px; /* ØªÙˆØ³ÙŠØ¹ Ø§Ù„Ù„ÙˆØ­Ø© */
                gap: 12px;
                padding: 15px;
            }
            .number-pad button {
                width: 70px;
                height: 70px;
                font-size: 24px; /* ØªÙƒØ¨ÙŠØ± Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… */
            }
            .secret-and-toggle {
                gap: 20px; /* ØªØ¨Ø§Ø¹Ø¯ Ø£ÙƒØ¨Ø± */
            }
            .buttons {
                gap: 15px;
            }
        }

        /* Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© (Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£ØµÙ„ÙŠ Ù…Ø¹ ØªÙƒØ¨ÙŠØ± Ø·ÙÙŠÙ Ù„Ù„ØªØ§Ø±ÙŠØ®) */
        @media (max-width: 768px) {
            .container { 
                padding: 20px; 
                max-width: 100%; /* ÙŠØ£Ø®Ø° ÙƒØ§Ù…Ù„ Ø§Ù„Ø¹Ø±Ø¶ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
            }
            .buttons { 
                flex-direction: column; 
                align-items: center; 
            }
            input, .secret-box { 
                width: 45px; 
                height: 45px; 
                font-size: 18px; 
            }
            button { 
                width: 100%; 
                max-width: 200px; 
            }
            .secret-and-toggle { 
                flex-direction: column; 
                gap: 10px; 
            }
            .number-pad { 
                max-width: 180px; 
            }
            .number-pad button { 
                width: 45px; 
                height: 45px; 
                font-size: 16px; 
            }
            .attempts-history { 
                font-size: 12px; 
                padding: 8px; 
            }
            .attempts-history h3 { 
                font-size: 14px; 
            }
            .attempt { 
                padding: 6px; 
            }
            .guess-text { 
                font-size: 18px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
                padding: 3px 6px; 
            }
            .result-small { 
                font-size: 16px; /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
                gap: 4px; /* ØªØ¨Ø§Ø¹Ø¯ Ø£ÙØ¶Ù„ */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ÙƒØ´Ù Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ</h1>
        
        <!-- Ø§Ù„Ù…Ø¤Ù‚Øª -->
        <div id="timer" class="timer">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 10:00</div>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙˆØ§Ù„Ø²Ø± -->
        <div class="secret-and-toggle">
            <button class="toggle-btn" onclick="toggleSecret()">Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡</button>
            <div class="secret-display" id="secretDisplay">
                <div class="secret-box" data-index="0">?</div>
                <div class="secret-box" data-index="1">?</div>
                <div class="secret-box" data-index="2">?</div>
                <div class="secret-box" data-index="3">?</div>
            </div>
            <button class="reset-btn" onclick="resetGame()">Ø±Ù‚Ù… Ø¬Ø¯ÙŠØ¯</button>
        </div>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
        <div class="input-section">
            <div class="input-row">
                <input type="text" id="digit4" placeholder="0" maxlength="1" dir="rtl" readonly>
                <input type="text" id="digit3" placeholder="0" maxlength="1" dir="rtl" readonly>
                <input type="text" id="digit2" placeholder="0" maxlength="1" dir="rtl" readonly>
                <input type="text" id="digit1" placeholder="0" maxlength="1" dir="rtl" readonly>
            </div>
            <div class="buttons">
                <button id="checkBtn" onclick="checkGuess()" disabled>ØªØ­Ù‚Ù‚</button>
            </div>
            
            <!-- Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© (Ù…Ø¨Ø§Ø´Ø±Ø© ØªØ­Øª Ø§Ù„Ø£Ø²Ø±Ø§Ø±) -->
            <div id="result" class="result"></div>
            
            <!-- Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù…Ø±Ø¦ÙŠØ©) -->
            <div class="number-pad" id="numberPad">
                <button onclick="enterNumber(1)">1</button>
                <button onclick="enterNumber(2)">2</button>
                <button onclick="enterNumber(3)">3</button>
                <button onclick="enterNumber(4)">4</button>
                <button onclick="enterNumber(5)">5</button>
                <button onclick="enterNumber(6)">6</button>
                <button onclick="enterNumber(7)">7</button>
                <button onclick="enterNumber(8)">8</button>
                <button onclick="enterNumber(9)">9</button>
                <button onclick="enterNumber(0)">0</button>
                <button class="delete-btn" onclick="deleteNumber()">ğŸ—‘ï¸</button>
            </div>
        </div>
        
        <!-- ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ù…Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø§Ø¯) -->
        <div id="attempts-history" class="attempts-history">
            <h3>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: 0):</h3>
        </div>
    </div>

    <script>
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
        let secretNumber = [];
        let attemptsCount = 0;
        let attemptsHistory = [];
        let secretVisible = false;
        let timeLeft = 600; // 10 Ø¯Ù‚Ø§Ø¦Ù‚ = 600 Ø«Ø§Ù†ÙŠØ©
        let timerInterval;
        let timerStarted = false;
        let activeInput = null;

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø³Ø­Ø¨
        let isDragging = false;
        let offsetX = 0;
        let offsetY = 0;

        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            generateSecret();
            setupInputs();
            setActiveInput(document.getElementById('digit1')); // Ø§Ø¨Ø¯Ø£ Ù…Ù† digit1 (Ø§Ù„Ø£ÙŠØ³Ø±)
            setupDragging(); // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø­Ø¨
        };

        // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø³Ø±ÙŠ (4 Ø£Ø±Ù‚Ø§Ù… Ù…Ù† 0-9ØŒ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªÙƒØ±Ø§Ø±)
        function generateSecret() {
            secretNumber = [];
            for (let i = 0; i < 4; i++) {
                secretNumber.push(Math.floor(Math.random() * 10));
            }
            hideSecret();
        }

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ù‚ÙˆÙ„ (Ø¨Ø¯ÙˆÙ† listeners Ù„Ù„ÙƒÙŠØ¨ÙˆØ±Ø¯)
        function setupInputs() {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => {
                input.addEventListener('click', function() {
                    setActiveInput(this);
                });
            });
        }

        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®Ø§Ù†Ø© Ø§Ù„Ù†Ø´Ø·Ø© ÙˆØ¥Ø²Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø§Ø· Ù…Ù† Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†
        function setActiveInput(input) {
            const inputs = document.querySelectorAll('input');
            inputs.forEach(inp => inp.classList.remove('active'));
            input.classList.add('active');
            activeInput = input;
        }

        // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø²Ø± Ø§Ù„ØªØ­Ù‚Ù‚ (ØªÙØ¹ÙŠÙ„Ù‡ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù…Ù…Ù„ÙˆØ¡Ø©)
        function updateCheckButton() {
            const inputs = document.querySelectorAll('input');
            const values = Array.from(inputs).map(input => input.value);
            const checkBtn = document.getElementById('checkBtn');
            const allFilled = values.every(val => val !== '');
            checkBtn.disabled = !allFilled;
        }

        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø³Ø­Ø¨ Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (ÙŠØ¯Ø¹Ù… Ø§Ù„Ù…Ø§ÙˆØ³ ÙˆØ§Ù„Ù„Ù…Ø³)
        function setupDragging() {
            const pad = document.getElementById('numberPad');

            // Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„Ù…Ø§ÙˆØ³
            pad.addEventListener('mousedown', startDrag);
            // Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø­Ø¨ Ø¨Ø§Ù„Ù„Ù…Ø³
            pad.addEventListener('touchstart', startDrag);

            // Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø³Ø­Ø¨
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag);

            // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³Ø­Ø¨
            document.addEventListener('mouseup', stopDrag);
            document.addEventListener('touchend', stopDrag);
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ø³Ø­Ø¨
        function startDrag(e) {
            isDragging = true;
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            const rect = pad.getBoundingClientRect();
            offsetX = clientX - rect.left;
            offsetY = clientY - rect.top;
            e.preventDefault(); // Ù…Ù†Ø¹ Ø§Ù„Ø³Ù„ÙˆÙƒ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
        }

        // Ø§Ù„Ø³Ø­Ø¨
        function drag(e) {
            if (!isDragging) return;
            const pad = document.getElementById('numberPad');
            const clientX = e.clientX || e.touches[0].clientX;
            const clientY = e.clientY || e.touches[0].clientY;
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const padWidth = pad.offsetWidth;
            const padHeight = pad.offsetHeight;

            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø§Ù„Ø­Ø¯ÙˆØ¯
            let newLeft = clientX - offsetX;
            let newTop = clientY - offsetY;
            newLeft = Math.max(0, Math.min(newLeft, viewportWidth - padWidth));
            newTop = Math.max(0, Math.min(newTop, viewportHeight - padHeight));

            pad.style.left = newLeft + 'px';
            pad.style.top = newTop + 'px';
            pad.style.transform = 'translate(0, 0)'; // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ø­Ø¨
            e.preventDefault();
        }

        // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³Ø­Ø¨
        function stopDrag() {
            isDragging = false;
        }

        // Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
        function enterNumber(num) {
            playClickSound(); // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
            if (!activeInput) {
                setActiveInput(document.getElementById('digit1')); // Ø§Ø¨Ø¯Ø£ Ù…Ù† digit1 Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù†Ø´Ø·
            }
            activeInput.value = num;
            updateCheckButton();

            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø¥Ø¯Ø®Ø§Ù„ Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¨Ø¯Ø£ Ø¨Ø¹Ø¯
            if (!timerStarted) {
                startTimer();
                timerStarted = true;
            }

            // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø®Ø§Ù†Ø© Ø§Ù„ØªØ§Ù„ÙŠØ© (previousElementSibling ÙÙŠ DOM: digit1 -> digit2 -> digit3 -> digit4)
            const nextInput = activeInput.previousElementSibling;
            if (nextInput && nextInput.tagName === 'INPUT') {
                setActiveInput(nextInput);
            }
        }

        // Ø­Ø°Ù Ø§Ù„Ø±Ù‚Ù… Ù…Ù† Ø§Ù„Ø®Ø§Ù†Ø© Ø§Ù„Ù†Ø´Ø·Ø©
        function deleteNumber() {
            playClickSound(); // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø±
            if (activeInput) {
                activeInput.value = '';
                updateCheckButton();
            }
        }

        // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Web Audio API
        function playClickSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime); // ØªØ±Ø¯Ø¯ Ø§Ù„ØµÙˆØª
                oscillator.type = 'square'; // Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØª
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime); // Ø­Ø¬Ù… Ø§Ù„ØµÙˆØª
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1); // ØªÙ„Ø§Ø´ÙŠ Ø³Ø±ÙŠØ¹
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1); // Ù…Ø¯Ø© Ø§Ù„ØµÙˆØª 100ms
            } catch (e) {
                // Ø¥Ø°Ø§ ÙØ´Ù„ØŒ Ù„Ø§ ÙŠØ­Ø¯Ø« Ø´ÙŠØ¡ (ØµÙ…Øª)
                console.log('Audio not supported');
            }
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ®Ù…ÙŠÙ† Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØªÙƒØ±Ø§Ø± (Ø§Ù„Ø¥ØµÙ„Ø§Ø­: ØªØ±ØªÙŠØ¨ guess ØµØ­ÙŠØ­)
        function checkGuess() {
            // Ù‚Ø±Ø§Ø¡Ø© guess Ø¨Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„ØµØ­ÙŠØ­: digit4 (Ù…ÙˆØ¶Ø¹ 0ØŒ Ø£ÙŠÙ…Ù†) Ø¥Ù„Ù‰ digit1 (Ù…ÙˆØ¶Ø¹ 3ØŒ Ø£ÙŠØ³Ø±)
            let guess = [
                parseInt(document.getElementById('digit4').value) || 0,
                parseInt(document.getElementById('digit3').value) || 0,
                parseInt(document.getElementById('digit2').value) || 0,
                parseInt(document.getElementById('digit1').value) || 0
            ];

            attemptsCount++;
            updateAttemptsHistory(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø¯Ù…Ø¬

            let bulls = 0;
            let cows = 0;

            // Ø­Ø³Ø§Ø¨ Bulls (Ù…ÙˆØ§Ø¶Ø¹ ØµØ­ÙŠØ­Ø©)
            for (let i = 0; i < 4; i++) {
                if (guess[i] === secretNumber[i]) {
                    bulls++;
                }
            }

            // Ø­Ø³Ø§Ø¨ Cows (Ø£Ø±Ù‚Ø§Ù… ØµØ­ÙŠØ­Ø© ÙÙŠ Ù…ÙˆØ§Ø¶Ø¹ Ø®Ø§Ø·Ø¦Ø©ØŒ Ù…Ø¹ Ø¯Ø¹Ù… Ø§Ù„ØªÙƒØ±Ø§Ø±)
            let secretFreq = {};
            let guessFreq = {};

            for (let i = 0; i < 4; i++) {
                if (guess[i] !== secretNumber[i]) {
                    if (!secretFreq[secretNumber[i]]) secretFreq[secretNumber[i]] = 0;
                    secretFreq[secretNumber[i]]++;
                    if (!guessFreq[guess[i]]) guessFreq[guess[i]] = 0;
                    guessFreq[guess[i]]++;
                }
            }

            for (let num in guessFreq) {
                if (secretFreq[num]) {
                    cows += Math.min(guessFreq[num], secretFreq[num]);
                }
            }

            // Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ®
            attemptsHistory.push({ guess: guess, bulls: bulls, cows: cows });
            updateAttemptsHistory();

            // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
            const resultDiv = document.getElementById('result');
            if (bulls === 4) {
                resultDiv.innerHTML = 'Ù…Ø¨Ø±ÙˆÙƒ! Ù„Ù‚Ø¯ ÙƒØ´ÙØª Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ! ğŸ‰';
                resultDiv.classList.add('success');
                revealSecret();
                secretVisible = true;
                stopTimer();
            } else {
                let resultText = '';
                for (let i = 0; i < bulls; i++) {
                    resultText += '<span class="plus">+</span>';
                }
                for (let i = 0; i < cows; i++) {
                    resultText += '<span class="minus">-</span>';
                }
                if (bulls === 0 && cows === 0) {
                    resultText = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¨Ù‚Ø©';
                }
                resultDiv.innerHTML = resultText;
                resultDiv.classList.remove('success');
            }

            // Ù…Ø³Ø­ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => input.value = '');
            updateCheckButton();
            setActiveInput(document.getElementById('digit1')); // Ø§Ø¨Ø¯Ø£ Ù…Ù† digit1 Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
        }

        // ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ù…Ø¯Ù…Ø¬ Ù…Ø¹ Ø§Ù„Ø¹Ø¯Ø§Ø¯ØŒ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ø¹ÙƒÙˆØ³Ø© Ù„Ù„ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨ØµØ±ÙŠ)
        function updateAttemptsHistory() {
            const historyDiv = document.getElementById('attempts-history');
            historyDiv.innerHTML = `<h3>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª (Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª: ${attemptsCount}):</h3>`;
            if (attemptsHistory.length === 0) {
                historyDiv.innerHTML += '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¨Ø¹Ø¯.</p>';
            } else {
                attemptsHistory.forEach((attempt, index) => {
                    const div = document.createElement('div');
                    div.className = 'attempt';

                    // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ø¹ÙƒÙˆØ³Ø© Ù„ØªØ·Ø§Ø¨Ù‚ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¨ØµØ±ÙŠ (Ù…Ù† Ø§Ù„ÙŠØ³Ø§Ø± Ø¥Ù„Ù‰ Ø§Ù„ÙŠÙ…ÙŠÙ† ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©)
                    const guessText = document.createElement('div');
                    guessText.className = 'guess-text';
                    guessText.textContent = attempt.guess.slice().reverse().join(''); // Ø¹ÙƒØ³ Ù„Ù„ØªØ·Ø§Ø¨Ù‚
                    div.appendChild(guessText);

                    const resultSmall = document.createElement('div');
                    resultSmall.className = 'result-small';
                    let resultText = '';
                    for (let i = 0; i < attempt.bulls; i++) {
                        resultText += '<span class="plus">+</span>';
                    }
                    for (let i = 0; i < attempt.cows; i++) {
                        resultText += '<span class="minus">-</span>';
                    }
                    if (attempt.bulls === 0 && attempt.cows === 0) {
                        resultText = 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø·Ø§Ø¨Ù‚Ø©';
                    }
                    resultSmall.innerHTML = resultText;
                    div.appendChild(resultSmall);

                    historyDiv.appendChild(div);
                });
            }
        }

        // ÙƒØ´Ù Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ
        function revealSecret() {
            const boxes = document.querySelectorAll('.secret-box');
            boxes.forEach((box, index) => {
                box.textContent = secretNumber[index];
                box.classList.add('revealed');
            });
        }

        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ
        function hideSecret() {
            const boxes = document.querySelectorAll('.secret-box');
            boxes.forEach(box => {
                box.textContent = '?';
                box.classList.remove('revealed');
            });
        }

        // ØªØ¨Ø¯ÙŠÙ„ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø±Ù‚Ù…
        function toggleSecret() {
            if (secretVisible) {
                hideSecret();
                secretVisible = false;
            } else {
                revealSecret();
                secretVisible = true;
            }
        }

        // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨
        function resetGame() {
            generateSecret();
            attemptsCount = 0;
            attemptsHistory = [];
            secretVisible = false;
            timeLeft = 600;
            timerStarted = false;
            stopTimer();
            document.getElementById('result').innerHTML = '';
            document.getElementById('result').classList.remove('success');
            document.getElementById('timer').classList.remove('time-up');
            updateAttemptsHistory(); // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø¯Ù…Ø¬
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => input.value = '');
            updateCheckButton();
            setActiveInput(document.getElementById('digit1')); // Ø§Ø¨Ø¯Ø£ Ù…Ù† digit1
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ù…ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙˆØ­Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£ÙˆÙ„ÙŠ
            const pad = document.getElementById('numberPad');
            pad.style.top = '70%';
            pad.style.left = '50%';
            pad.style.transform = 'translate(-50%, -50%)';
        }

        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if (timeLeft <= 0) {
                    timeUp();
                }
            }, 1000);
        }

        // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ù…Ø¤Ù‚Øª
        function stopTimer() {
            clearInterval(timerInterval);
        }

        // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø¤Ù‚Øª
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            const timerDiv = document.getElementById('timer');
            timerDiv.textContent = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        // Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ÙˆÙ‚Øª
        function timeUp() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = 'Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ ÙƒØ§Ù†: ' + secretNumber.slice().reverse().join('') + ' ğŸ˜'; // Ø¹ÙƒØ³ Ù„Ù„ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø¨ØµØ±ÙŠ
            resultDiv.classList.add('success');
            revealSecret();
            secretVisible = true;
            document.getElementById('timer').classList.add('time-up');
            const inputs = document.querySelectorAll('input');
            inputs.forEach(input => input.disabled = true);
            document.getElementById('checkBtn').disabled = true;
        }
    </script>
</body>
</html>
